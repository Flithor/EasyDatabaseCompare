<Window x:Name="window" x:Class="EasyDatabaseCompare.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:EasyDatabaseCompare"
        mc:Ignorable="d"
        Title="MainWindow">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ControlResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <local:TopMsg x:Name="topMsg" Template="{StaticResource topMsgTemp}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid Grid.ColumnSpan="2">
                <Grid Margin="0,0,137,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="17"/>
                    </Grid.ColumnDefinitions>
                    <Grid.Triggers>
                        <EventTrigger SourceName="changeMode" RoutedEvent="ToggleButton.Unchecked">
                            <BeginStoryboard>
                                <Storyboard FillBehavior="Stop">
                                    <ThicknessAnimation From="0" To="0,-17,0,0" Storyboard.TargetName="connStrGrid" Storyboard.TargetProperty="Margin" Duration="0:0:0.5">
                                        <ThicknessAnimation.EasingFunction>
                                            <QuinticEase EasingMode="EaseOut"/>
                                        </ThicknessAnimation.EasingFunction>
                                    </ThicknessAnimation>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                        <EventTrigger SourceName="changeMode" RoutedEvent="ToggleButton.Checked">
                            <EventTrigger.Actions>
                                <BeginStoryboard>
                                    <Storyboard FillBehavior="HoldEnd">
                                        <ThicknessAnimation From="0,-17,0,0" To="0" Storyboard.TargetName="connStrGrid" Storyboard.TargetProperty="Margin" Duration="0:0:0.5">
                                            <ThicknessAnimation.EasingFunction>
                                                <QuinticEase EasingMode="EaseOut"/>
                                            </ThicknessAnimation.EasingFunction>
                                        </ThicknessAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger.Actions>
                        </EventTrigger>
                    </Grid.Triggers>
                    <Grid>
                        <Label Content="Database Type" Padding="2,0" HorizontalAlignment="Left" BorderBrush="#FFACACAC" BorderThickness="1,1,0,1"/>
                        <ComboBox x:Name="dbType" ItemsSource="{Binding SupportedDbList, ElementName=window}" SelectedIndex="0" IsSynchronizedWithCurrentItem="True" Padding="3,1" Margin="89.79,0,0,0" SelectionChanged="dbType_SelectionChanged"/>
                    </Grid>

                    <Grid x:Name="fieldsGrid" Grid.Column="1">
                        <!--<Grid Grid.Column="1">
                            <Label Content="Data Server" Padding="2,0" HorizontalAlignment="Left" BorderBrush="#FFABADB3" BorderThickness="1,1,0,1"/>
                            <TextBox x:Name="dbServer" Margin="71.44,0,0,0"/>
                        </Grid>
                        <Grid Grid.Column="2">
                            <Label Content="Data Source" Padding="2,0" HorizontalAlignment="Left" BorderBrush="#FFABADB3" BorderThickness="1,1,0,1"/>
                            <TextBox x:Name="dbSource" Margin="74.787,0,0,0"/>
                        </Grid>
                        <Grid Grid.Column="3">
                            <Label Content="User ID" Padding="2,0" HorizontalAlignment="Left" BorderBrush="#FFABADB3" BorderThickness="1,1,0,1"/>
                            <TextBox x:Name="dbUid" Margin="47.123,0,0,0"/>
                        </Grid>
                        <Grid Grid.Column="4">
                            <Label Content="PassWord" Padding="2,0" HorizontalAlignment="Left" BorderBrush="#FFABADB3" BorderThickness="1,1,0,1"/>
                            <TextBox x:Name="dbPwd" Margin="62.183,0,0,0"/>
                        </Grid>-->
                    </Grid>
                    <Grid x:Name="connStrGrid" Grid.Column="1" Grid.ColumnSpan="4" Margin="0,-17,0,0" VerticalAlignment="Top">
                        <Label Content="Connection String" Padding="2,0" HorizontalAlignment="Left" BorderBrush="#FFACACAC" BorderThickness="1,1,0,1" Background="White"/>
                        <TextBox x:Name="connStr" VerticalAlignment="Top" Margin="108.75,0,0,0" Height="17"/>
                    </Grid>
                    <ToggleButton x:Name="changeMode" Grid.Column="5" Content="{StaticResource dblArrow}" Checked="changeMode_Checked" Unchecked="changeMode_Unchecked"/>

                </Grid>
                <Button x:Name="checkConn" Content="Check" HorizontalAlignment="Right" VerticalAlignment="Top" Width="60" Padding="0" Click="checkConn_Click" Margin="0,0,77,0" Grid.Column="1" Height="17"/>
                <ToggleButton x:Name="showFilter" Content="↓ Filter ↓" HorizontalAlignment="Right" VerticalAlignment="Top" Width="60" Padding="0" Margin="0,0,17,0" IsEnabled="False" Grid.Column="1" Height="17"/>
                <Button x:Name="reset" HorizontalAlignment="Right" VerticalAlignment="Top" Width="17" Padding="0" Margin="0" Height="17" Click="reset_Click" Grid.Column="1" Content="{StaticResource resetArrow}"/>

                <!--Visibility="Collapsed"-->
                <Popup x:Name="filterPopup" PopupAnimation="Slide" StaysOpen="False" Placement="Relative" 
                   IsOpen="{Binding IsChecked, ElementName=showFilter}"
                   PlacementTarget="{Binding ElementName=showFilter}" Width="196" MaxHeight="400">
                    <Grid Background="White">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <CheckBox x:Name="isBlackList" HorizontalAlignment="Left" Padding="1,1,0,0" Margin="0" VerticalContentAlignment="Stretch">Black List Mode</CheckBox>
                        <TextBox x:Name="filterStr" TextChanged="filterStr_TextChanged" HorizontalAlignment="Right" Width="87.805" Style="{StaticResource filterTBoxStyle}"/>
                        <ListBox Grid.Row="1" x:Name="filterTableList" SelectionMode="Multiple" SelectionChanged="filterTableList_SelectionChanged"/>
                    </Grid>
                </Popup>
            </Grid>
            <Button x:Name="get1" Grid.Row="1" Content="↓ Get Current ↓" Click="get1_Click" IsEnabled="False"/>
            <Button x:Name="get2" Grid.Row="1" Grid.Column="1" Content="↓ Get Current ↓" Click="get2_Click" IsEnabled="False"/>
            <Rectangle x:Name="pro1" Height="3" Grid.Row="2" VerticalAlignment="Top" HorizontalAlignment="Left" Fill="CornflowerBlue" StrokeThickness="0" Width="{Binding ActualWidth, ElementName=queryRe1}" >
                <Rectangle.LayoutTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="{Binding QueryProcess1, ElementName=window}"/>
                    </TransformGroup>
                </Rectangle.LayoutTransform>
            </Rectangle>
            <Rectangle x:Name="pro2" Height="3" Grid.Row="2" VerticalAlignment="Top" HorizontalAlignment="Left" Fill="CornflowerBlue" StrokeThickness="0" Width="{Binding ActualWidth, ElementName=queryRe2}" Grid.Column="1">
                <Rectangle.LayoutTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="{Binding QueryProcess2, ElementName=window}"/>
                    </TransformGroup>
                </Rectangle.LayoutTransform>
            </Rectangle>
            <TextBlock x:Name="queryRe1" Text="No Data" Grid.Row="2" Padding="3" Background="{x:Null}" TextAlignment="Center"/>
            <TextBlock x:Name="queryRe2" Text="No Data" Grid.Row="2" Padding="3" Grid.Column="1" TextAlignment="Center" Background="{StaticResource click2LeftBgBrush}"/>
            <!--<TextBlock x:Name="queryRe2" Text="No Data" Grid.Row="2" Padding="3" Grid.Column="1" Background="{x:Null}" TextAlignment="Center">
            <Hyperlink Style="{x:Null}" TextDecorations="{x:Null}"><Run Foreground="Red">123</Run></Hyperlink>
            <Span>123</Span>
            <Run>123</Run>
        </TextBlock>-->
            <Button x:Name="btnComp" Grid.Row="3" Grid.ColumnSpan="2" Content="↓ Compare ↓" Click="btnComp_Click" IsEnabled="False"/>
            <Grid Grid.Row="4" Grid.ColumnSpan="2">
                <Rectangle x:Name="compPro" Height="3" Grid.Row="2" VerticalAlignment="Top" HorizontalAlignment="Left" Fill="CornflowerBlue" StrokeThickness="0" Width="{Binding ActualWidth, ElementName=compRe}" >
                    <Rectangle.LayoutTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="{Binding CompareProcess, ElementName=window}"/>
                        </TransformGroup>
                    </Rectangle.LayoutTransform>
                </Rectangle>
                <TextBlock x:Name="compReState" Text="Not Start Compare" Padding="3" Background="{x:Null}" TextAlignment="Center"/>
            </Grid>
            <ListBox x:Name="compRe" Grid.Row="5" Grid.ColumnSpan="2" ScrollViewer.HorizontalScrollBarVisibility="Disabled" Margin="0" />
        </Grid>
    </local:TopMsg>
</Window>
